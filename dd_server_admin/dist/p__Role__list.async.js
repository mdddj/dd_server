!(function(){"use strict";var ie=Object.defineProperty,ue=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var ae=(v,o,e)=>o in v?ie(v,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):v[o]=e,k=(v,o)=>{for(var e in o||(o={}))oe.call(o,e)&&ae(v,e,o[e]);if(te)for(var e of te(o))le.call(o,e)&&ae(v,e,o[e]);return v},re=(v,o)=>ue(v,de(o));var se=(v,o)=>{var e={};for(var a in v)oe.call(v,a)&&o.indexOf(a)<0&&(e[a]=v[a]);if(v!=null&&te)for(var a of te(v))o.indexOf(a)<0&&le.call(v,a)&&(e[a]=v[a]);return e};(self.webpackChunk=self.webpackChunk||[]).push([[854],{76591:function(v,o,e){var a=e(37469),n=e(93236),P=e(38917),g=e(16286),F=function(N,E){return n.createElement(g.Z,(0,a.Z)({},N,{ref:E,icon:P.Z}))},G=n.forwardRef(F);o.Z=G},41594:function(v,o,e){var a=e(30309),n=e(35194),P=e(50446),g=e(10753),F=e(1317),G=e(54689),T=e(71770),N=e(93236),E=e(19544),R=e(62086),b=["fieldProps","proFieldProps"],S=["fieldProps","proFieldProps"],y="text",K=function(s){var t=s.fieldProps,C=s.proFieldProps,O=(0,P.Z)(s,b);return(0,R.jsx)(E.Z,(0,n.Z)({valueType:y,fieldProps:t,filedConfig:{valueType:y},proFieldProps:C},O))},l=function(s){var t=(0,g.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),C=(0,a.Z)(t,2),O=C[0],c=C[1];return(0,R.jsx)(F.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(B){var r,M=B.getFieldValue(s.name||[]);return(0,R.jsx)(G.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(f){return f&&f.parentNode?f.parentNode:f},onOpenChange:function(f){return c(f)},content:(0,R.jsxs)("div",{style:{padding:"4px 0"},children:[(r=s.statusRender)===null||r===void 0?void 0:r.call(s,M),s.strengthText?(0,R.jsx)("div",{style:{marginTop:10},children:(0,R.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:O,children:s.children}))}})},U=function(s){var t=s.fieldProps,C=s.proFieldProps,O=(0,P.Z)(s,S),c=(0,N.useState)(!1),W=(0,a.Z)(c,2),B=W[0],r=W[1];return t!=null&&t.statusRender&&O.name?(0,R.jsx)(l,{name:O.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:B,onOpenChange:r,children:(0,R.jsx)("div",{children:(0,R.jsx)(E.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,T.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(j){var f;t==null||(f=t.onBlur)===null||f===void 0||f.call(t,j),r(!1)},onClick:function(j){var f;t==null||(f=t.onClick)===null||f===void 0||f.call(t,j),r(!0)}}),proFieldProps:C,filedConfig:{valueType:y}},O))})}):(0,R.jsx)(E.Z,(0,n.Z)({valueType:"password",fieldProps:t,proFieldProps:C,filedConfig:{valueType:y}},O))},u=K;u.Password=U,u.displayName="ProFormComponent",o.Z=u},1268:function(v,o,e){var a=e(35194),n=e(50446),P=e(93236),g=e(19544),F=e(62086),G=["fieldProps","proFieldProps"],T=function(E,R){var b=E.fieldProps,S=E.proFieldProps,y=(0,n.Z)(E,G);return(0,F.jsx)(g.Z,(0,a.Z)({ref:R,valueType:"textarea",fieldProps:b,proFieldProps:S},y))};o.Z=P.forwardRef(T)},61614:function(v,o,e){e.d(o,{Z:function(){return u}});var a=e(90228),n=e.n(a),P=e(87999),g=e.n(P),F=e(25298),G=e.n(F),T=e(17069),N=e.n(T),E=e(21742),R=e.n(E),b=e(83136),S=e.n(b),y=e(33910),K=e(93236),l=e(62086),U=function(I){R()(t,I);var s=S()(t);function t(){return G()(this,t),s.apply(this,arguments)}return N()(t,[{key:"render",value:function(){var O=this;return(0,l.jsx)(y.Z,{rowKey:this.props.rowKey,request:function(){var c=g()(n()().mark(function W(B){var r,M,j;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,O.props.api({page:((r=B.current)!==null&&r!==void 0?r:1)-1,pageSize:(M=B.pageSize)!==null&&M!==void 0?M:20});case 2:return j=h.sent,h.abrupt("return",{success:j.success,total:j.data.page.total,data:j.data.list});case 4:case"end":return h.stop()}},W)}));return function(W){return c.apply(this,arguments)}}(),columns:this.props.columns})}}]),t}(K.Component),u=U},26533:function(v,o,e){e.d(o,{Z:function(){return q}});var a=e(76591),n=e(80898),P=e(93236),g=e(26068),F=e.n(g),G=e(90228),T=e.n(G),N=e(87999),E=e.n(N),R=e(48305),b=e.n(R),S=e(67825),y=e.n(S),K=e(92628),l=e(62086),U=function(x){return _jsx(Modal,_objectSpread({},x))};function u(w,x){var A=document.createElement("div");A.id="select-file";var L=(0,K.createRoot)(A),J=!0,Y=P.cloneElement(w,F()(F()({open:J,getContainer:!1,onCancel:function(){var V=P.cloneElement(Y,{open:!1});L.render(V),console.log("\u5173\u95ED"),setTimeout(function(){L.unmount(),A.remove()},300)}},x),{},{onFileSelect:function(V){x==null||x.onFileSelect(V);var d=P.cloneElement(Y,{open:!1});L.render(d),setTimeout(function(){L.unmount(),A.remove()},300)}}));L.render(Y),document.body.appendChild(A)}var I=e(38887),s=e(81888),t=e(74721),C=e(91186),O=e(35317),c=e(5874),W=e(49591),B=e(20617),r=e(9117),M=["onFileSelect"],j=function(x){var A=x.file,L=x.onClick;return(0,l.jsx)(O.J,{onClick:L,isZoomed:!0,alt:A.fileName,src:A.url,className:"object-contain w-full aspect-square bg-secondary-50"})},f=function(x){var A=x.onFileSelect,L=y()(x,M),J=(0,P.useState)([]),Y=b()(J,2),X=Y[0],V=Y[1],d=function(){var m=E()(T()().mark(function p(){var i;return T()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,I.oC)({current:1,pageSize:20,remove:1});case 2:i=Z.sent,V(i.data.list);case 4:case"end":return Z.stop()}},p)}));return function(){return m.apply(this,arguments)}}();return(0,r.Z)(E()(T()().mark(function m(){return T()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d();case 2:case"end":return i.stop()}},m)}))),(0,l.jsxs)(c.Z,F()(F()({title:"\u9009\u62E9\u6587\u4EF6"},L),{},{children:[(0,l.jsx)("div",{style:{marginBottom:12},children:(0,l.jsx)(W.Z,{name:"file",action:t.t+"/api/storage/upload",headers:(0,C.P)(),onChange:function(){var m=E()(T()().mark(function p(i){return T()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(i.file.status!=="done"){Z.next=3;break}return Z.next=3,d();case 3:case"end":return Z.stop()}},p)}));return function(p){return m.apply(this,arguments)}}(),children:(0,l.jsx)(B.ZP,{type:"primary",icon:(0,l.jsx)(s.Z,{}),children:"\u65B0."})})}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2",children:X.map(function(m){return(0,l.jsx)(j,{file:m,onClick:function(){return A(m)}},m.id)})})]}))};function h(w){u((0,l.jsx)(f,F()({},w)),w)}var z=function(x){var A,L;return(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("div",{style:{flex:1,marginRight:2},children:x.children}),(0,l.jsx)(n.Z,{title:"\u4ECE\u6587\u4EF6\u4E2D\u9009\u62E9\u56FE\u50CF",children:(0,l.jsx)(a.Z,{style:{position:"absolute",top:(A=x.top)!==null&&A!==void 0?A:6,right:(L=x.right)!==null&&L!==void 0?L:12},onClick:function(){h(x)}})})]})},q=z},32540:function(v,o,e){e.r(o),e.d(o,{default:function(){return V}});var a=e(90228),n=e.n(a),P=e(87999),g=e.n(P),F=e(61614),G=e(26533),T=e(87568);function N(){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function d(){return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",request("/api/role/list"));case 1:case"end":return p.stop()}},d)})),E.apply(this,arguments)}function R(d){return b.apply(this,arguments)}function b(){return b=g()(n()().mark(function d(m){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,T.WY)("/api/role/list-page",{params:m}));case 1:case"end":return i.stop()}},d)})),b.apply(this,arguments)}function S(d){return y.apply(this,arguments)}function y(){return y=g()(n()().mark(function d(m){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,T.WY)("/api/role/save",{method:"POST",data:m}));case 1:case"end":return i.stop()}},d)})),y.apply(this,arguments)}function K(d){return l.apply(this,arguments)}function l(){return l=g()(n()().mark(function d(m){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,T.WY)("/api/role/delete",{method:"DELETE",params:{id:m}}));case 1:case"end":return i.stop()}},d)})),l.apply(this,arguments)}var U=e(89143),u=e(41594),I=e(1268),s=e(35194),t=e(50446),C=e(27175),O=e(97407),c=e(93236),W=e(19111),B=e(19544),r=e(62086),M=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],j=c.forwardRef(function(d,m){var p=d.fieldProps,i=d.options,D=d.radioType,Z=d.layout,Q=d.proFieldProps,H=d.valueEnum,$=(0,t.Z)(d,M);return(0,r.jsx)(B.Z,(0,s.Z)((0,s.Z)({valueType:D==="button"?"radioButton":"radio",ref:m,valueEnum:(0,C.h)(H,void 0)},$),{},{fieldProps:(0,s.Z)({options:i,layout:Z},p),proFieldProps:Q,filedConfig:{customLightMode:!0}}))}),f=c.forwardRef(function(d,m){var p=d.fieldProps,i=d.children;return(0,r.jsx)(O.ZP,(0,s.Z)((0,s.Z)({},p),{},{ref:m,children:i}))}),h=(0,W.G)(f,{valuePropName:"checked",ignoreWidth:!0}),z=h;z.Group=j,z.Button=O.ZP.Button,z.displayName="ProFormComponent";var q=z,w=e(17783),x=e(20617),A=e(7034),L=e(76569),J=e(61665),Y=e(7432),X=function(m){var p,i,D=(0,c.useRef)(),Z=function(){var Q=g()(n()().mark(function H($){var ee;return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return $.id=(ee=m.role)===null||ee===void 0?void 0:ee.id,_.next=3,S($);case 3:return _.abrupt("return",!0);case 4:case"end":return _.stop()}},H)}));return function($){return Q.apply(this,arguments)}}();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(U.Y,{initialValues:m.role,title:(p=m.title)!==null&&p!==void 0?p:"\u65B0\u5EFA\u6743\u9650",trigger:(i=m.trigger)!==null&&i!==void 0?i:(0,r.jsx)(x.ZP,{type:"primary",children:"\u65B0\u5EFA\u6743\u9650"}),width:500,onFinish:Z,onFinishFailed:m.onFinish,layout:"vertical",formRef:D,children:[(0,r.jsx)(u.Z,{name:"name",label:"\u540D\u79F0",required:!0}),(0,r.jsx)(I.Z,{name:"note",label:"\u5907\u6CE8"}),(0,r.jsx)(G.Z,{onFileSelect:function(H){var $;($=D.current)===null||$===void 0||$.setFieldValue("icon",H.url)},children:(0,r.jsx)(u.Z,{name:"icon",label:"\u56FE\u6807",tooltip:"\u8F93\u5165URL\u76F4\u94FE"})}),(0,r.jsx)(q.Group,{name:"status",label:"\u72B6\u6001",options:[{label:"\u542F\u7528",value:1},{label:"\u7981\u7528",value:0}],required:!0}),(0,r.jsx)(u.Z,{name:"sort",label:"\u6392\u5E8F"})]})})};function V(){return(0,r.jsx)(w._z,{children:(0,r.jsx)(A.Z,{title:(0,r.jsx)(X,{}),children:(0,r.jsx)(F.Z,{api:function(m){return R(m)},columns:[{key:"id",dataIndex:"id",title:"ID"},{key:"name",dataIndex:"name",title:"\u540D\u79F0"},{key:"note",dataIndex:"note",title:"\u5907\u6CE8"},{key:"sort",dataIndex:"sort",title:"\u6392\u5E8F"},{key:"action",render:function(m,p,i,D){return(0,r.jsxs)(L.Z,{children:[(0,r.jsx)(X,{title:"\u4FEE\u6539\u6743\u9650",trigger:(0,r.jsx)("a",{children:"\u4FEE\u6539"}),role:p,onFinish:function(){return D==null?void 0:D.reload()}}),(0,r.jsx)(J.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417? ",onConfirm:g()(n()().mark(function Z(){var Q;return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return Q=Y.ZP.loading("\u6B63\u5728\u5220\u9664..."),$.next=3,K(p.id);case 3:Q(),D==null||D.reload();case 5:case"end":return $.stop()}},Z)})),children:(0,r.jsx)("a",{children:"\u5220\u9664"})})]})}}],rowKey:"id"})})})}},38887:function(v,o,e){e.d(o,{QU:function(){return R},Zq:function(){return N},oC:function(){return G}});var a=e(90228),n=e.n(a),P=e(87999),g=e.n(P),F=e(74271);function G(S){return T.apply(this,arguments)}function T(){return T=g()(n()().mark(function S(y){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/file/list",{params:y}));case 1:case"end":return l.stop()}},S)})),T.apply(this,arguments)}function N(S){return E.apply(this,arguments)}function E(){return E=g()(n()().mark(function S(y){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/storage/delete",{method:"DELETE",params:{id:y}}));case 1:case"end":return l.stop()}},S)})),E.apply(this,arguments)}function R(S){return b.apply(this,arguments)}function b(){return b=g()(n()().mark(function S(y){var K,l;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return K=new FormData,K.append("file",y),u.next=4,(0,F.request)("/api/auth/simple-upload",{method:"POST",data:K});case 4:return l=u.sent,u.abrupt("return",l.data);case 6:case"end":return u.stop()}},S)})),b.apply(this,arguments)}},91186:function(v,o,e){e.d(o,{P:function(){return n},V:function(){return P}});var a=e(95024);function n(){var g,F=(g=(0,a.rS)())!==null&&g!==void 0?g:"";return F!==""?{Authorization:F}:{}}function P(){return{"Content-Type":"multipart/form-data"}}},77769:function(v,o,e){var a=e(93236),n=function(P){(0,a.useEffect)(P,[])};o.Z=n},9117:function(v,o,e){var a=e(77769),n=function(P){(0,a.Z)(function(){P()})};o.Z=n},35317:function(v,o,e){e.d(o,{J:function(){return l}});var a=e(93236),n=e(65555),P=e(48722),g=(0,P.tv)({slots:{wrapper:"relative shadow-black/5",zoomedWrapper:"relative overflow-hidden rounded-inherit",img:"relative z-10 opacity-0 shadow-black/5 data-[loaded=true]:opacity-100",blurredImg:["absolute","z-0","inset-0","w-full","h-full","object-cover","filter","blur-lg","scale-105","saturate-150","opacity-30","translate-y-1"]},variants:{radius:{none:{},sm:{},md:{},lg:{},full:{}},shadow:{none:{wrapper:"shadow-none",img:"shadow-none"},sm:{wrapper:"shadow-small",img:"shadow-small"},md:{wrapper:"shadow-medium",img:"shadow-medium"},lg:{wrapper:"shadow-large",img:"shadow-large"}},isZoomed:{true:{img:["object-cover","transform","hover:scale-125"]}},showSkeleton:{true:{wrapper:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2"],img:"opacity-0"}},disableAnimation:{true:{img:"transition-none"},false:{img:"transition-transform-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{radius:"lg",shadow:"none",isZoomed:!1,isBlurred:!1,showSkeleton:!1,disableAnimation:!1},compoundSlots:[{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"none",class:"rounded-none"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"full",class:"rounded-full"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"sm",class:"rounded-small"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"md",class:"rounded-md"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"lg",class:"rounded-large"}]}),F=e(88181),G=e(32321),T=e(47155),N=e(86094),E=globalThis!=null&&globalThis.document?a.useLayoutEffect:a.useEffect;function R(U={}){const{loading:u,src:I,srcSet:s,onLoad:t,onError:C,crossOrigin:O,sizes:c,ignoreFallback:W}=U,[B,r]=(0,a.useState)("pending");(0,a.useEffect)(()=>{r(I?"loading":"pending")},[I]);const M=(0,a.useRef)(),j=(0,a.useCallback)(()=>{if(!I)return;f();const h=new Image;h.src=I,O&&(h.crossOrigin=O),s&&(h.srcset=s),c&&(h.sizes=c),u&&(h.loading=u),h.onload=z=>{f(),r("loaded"),t==null||t(z)},h.onerror=z=>{f(),r("failed"),C==null||C(z)},M.current=h},[I,O,s,c,t,C,u]),f=()=>{M.current&&(M.current.onload=null,M.current.onerror=null,M.current=null)};return E(()=>{if(!W)return B==="loading"&&j(),()=>{f()}},[B,j,W]),W?"loaded":B}var b=(U,u)=>U!=="loaded"&&u==="beforeLoadOrError"||U==="failed"&&u==="onError";function S(U){const[u,I]=(0,n.oe)(U,g.variantKeys),ee=u,{ref:s,as:t,src:C,className:O,classNames:c,loading:W,isBlurred:B,fallbackSrc:r,isLoading:M,disableSkeleton:j=!!r,removeWrapper:f=!1,onError:h,onLoad:z,srcSet:q,sizes:w,crossOrigin:x}=ee,A=se(ee,["ref","as","src","className","classNames","loading","isBlurred","fallbackSrc","isLoading","disableSkeleton","removeWrapper","onError","onLoad","srcSet","sizes","crossOrigin"]),L=R({src:C,loading:W,onError:h,onLoad:z,ignoreFallback:!1,srcSet:q,sizes:w,crossOrigin:x}),J=L==="loaded"&&!M,Y=L==="loading"||M,X=U.isZoomed,V=t||"img",d=(0,F.gy)(s),{w:m}=(0,a.useMemo)(()=>({w:u.width?typeof u.width=="number"?`${u.width}px`:u.width:"fit-content"}),[u==null?void 0:u.width]),p=(!C||!J)&&!!r,i=Y&&!j,D=(0,a.useMemo)(()=>g(re(k({},I),{showSkeleton:i})),[(0,G.Xx)(I),i]),Z=(0,T.W)(O,c==null?void 0:c.img),Q=(ne={})=>{const _=(0,T.W)(Z,ne==null?void 0:ne.className);return k({src:C,ref:d,"data-loaded":(0,N.PB)(J),className:D.img({class:_}),loading:W,srcSet:q,sizes:w,crossOrigin:x},A)},H=(0,a.useCallback)(()=>{const ne=p?{backgroundImage:`url(${r})`}:{};return{className:D.wrapper({class:c==null?void 0:c.wrapper}),style:re(k({},ne),{maxWidth:m})}},[D,p,r,c==null?void 0:c.wrapper]),$=(0,a.useCallback)(()=>({src:C,"aria-hidden":(0,N.PB)(!0),className:D.blurredImg({class:c==null?void 0:c.blurredImg})}),[D,C,c==null?void 0:c.blurredImg]);return{Component:V,domRef:d,slots:D,classNames:c,isBlurred:B,disableSkeleton:j,fallbackSrc:r,removeWrapper:f,isZoomed:X,isLoading:Y,getImgProps:Q,getWrapperProps:H,getBlurredImgProps:$}}var y=e(62086),K=(0,n.Gp)((U,u)=>{const{Component:I,domRef:s,slots:t,classNames:C,isBlurred:O,isZoomed:c,fallbackSrc:W,removeWrapper:B,disableSkeleton:r,getImgProps:M,getWrapperProps:j,getBlurredImgProps:f}=S(re(k({},U),{ref:u})),h=(0,y.jsx)(I,k({ref:s},M()));if(B)return h;const z=(0,y.jsx)("div",{className:t.zoomedWrapper({class:C==null?void 0:C.zoomedWrapper}),children:h});return O?(0,y.jsxs)("div",re(k({},j()),{children:[c?z:h,(0,a.cloneElement)(h,f())]})):c||!r||W?(0,y.jsxs)("div",re(k({},j()),{children:[" ",c?z:h]})):h});K.displayName="NextUI.Image";var l=K}}]);
}());