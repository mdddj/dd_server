"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8246],{25874:function(k,F,e){e.d(F,{Z:function(){return X}});var U=e(25465),s=e(83062),b=e(67294),u=e(97857),c=e.n(u),E=e(15009),y=e.n(E),D=e(99289),R=e.n(D),S=e(5574),x=e.n(S),o=e(13769),A=e.n(o),_=e(20745),r=e(85893),B=function(m){return _jsx(Modal,_objectSpread({},m))};function g(Z,m){var l=document.createElement("div");l.id="select-file";var n=(0,_.createRoot)(l),f=!0,d=b.cloneElement(Z,c()(c()({open:f,getContainer:!1,onCancel:function(){var P=b.cloneElement(d,{open:!1});n.render(P),console.log("\u5173\u95ED"),setTimeout(function(){n.unmount(),l.remove()},300)}},m),{},{onFileSelect:function(P){m==null||m.onFileSelect(P);var T=b.cloneElement(d,{open:!1});n.render(T),setTimeout(function(){n.unmount(),l.remove()},300)}}));n.render(d),document.body.appendChild(l)}var K=e(9096),I=e(88484),W=e(55375),a=e(10981),p=e(44033),v=e(85576),t=e(2058),q=e(14726),J=e(89048),z=["onFileSelect"],V=function(m){var l=m.file,n=m.onClick;return(0,r.jsx)(p.J,{onClick:n,isZoomed:!0,alt:l.fileName,src:l.url,className:"object-contain w-full aspect-square bg-secondary-50"})},j=function(m){var l=m.onFileSelect,n=A()(m,z),f=(0,b.useState)([]),d=x()(f,2),M=d[0],P=d[1],T=function(){var C=R()(y()().mark(function $(){var L;return y()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,K.oC)({current:1,pageSize:20,remove:1});case 2:L=O.sent,P(L.data.list);case 4:case"end":return O.stop()}},$)}));return function(){return C.apply(this,arguments)}}();return(0,J.Z)(R()(y()().mark(function C(){return y()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,T();case 2:case"end":return L.stop()}},C)}))),(0,r.jsxs)(v.Z,c()(c()({title:"\u9009\u62E9\u6587\u4EF6"},n),{},{children:[(0,r.jsx)("div",{style:{marginBottom:12},children:(0,r.jsx)(t.Z,{name:"file",action:W.ty+"/api/storage/upload",headers:(0,a.P)(),onChange:function(){var C=R()(y()().mark(function $(L){return y()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(L.file.status!=="done"){O.next=3;break}return O.next=3,T();case 3:case"end":return O.stop()}},$)}));return function($){return C.apply(this,arguments)}}(),children:(0,r.jsx)(q.ZP,{type:"primary",icon:(0,r.jsx)(I.Z,{}),children:"\u65B0."})})}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:M.map(function(C){return(0,r.jsx)(V,{file:C,onClick:function(){return l(C)}},C.id)})})]}))};function Q(Z){g((0,r.jsx)(j,c()({},Z)),Z)}var ee=function(m){var l,n;return(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("div",{style:{flex:1,marginRight:2},children:m.children}),(0,r.jsx)(s.Z,{title:"\u4ECE\u6587\u4EF6\u4E2D\u9009\u62E9\u56FE\u50CF",children:(0,r.jsx)(U.Z,{style:{position:"absolute",top:(l=m.top)!==null&&l!==void 0?l:6,right:(n=m.right)!==null&&n!==void 0?n:12},onClick:function(){Q(m)}})})]})},X=ee},51625:function(k,F,e){var U=e(15009),s=e.n(U),b=e(97857),u=e.n(b),c=e(19632),E=e.n(c),y=e(5574),D=e.n(y),R=e(99289),S=e.n(R),x=e(64317),o=e(50942),A=e(25278),_=e(67294),r=e(85893);function B(){return g.apply(this,arguments)}function g(){return g=S()(s()().mark(function I(){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.request)("/api/rc/types"));case 1:case"end":return a.stop()}},I)})),g.apply(this,arguments)}var K=function(W){var a,p=(0,_.useState)(""),v=D()(p,2),t=v[0],q=v[1],J=(0,o.useRequest)(function(){return B()}),z=J.data,V=J.loading;return(0,r.jsx)(x.Z,u()(u()({},W),{},{options:[].concat(E()((a=z==null?void 0:z.map(function(j){return{label:j.type,value:j.type}}))!==null&&a!==void 0?a:[]),[t!==""&&{label:t,value:t}]),fieldProps:{loading:V,dropdownRender:function(Q){return(0,r.jsxs)(r.Fragment,{children:[Q,(0,r.jsx)(A.Z,{onChange:function(X){return q(X.target.value)}})]})}}}))};F.Z=K},18812:function(k,F,e){e.r(F),e.d(F,{default:function(){return m}});var U=e(19632),s=e.n(U),b=e(15009),u=e.n(b),c=e(99289),E=e.n(c),y=e(5574),D=e.n(y),R=e(97857),S=e.n(R),x=e(4499),o=e(90672),A=e(82014),_=e(67294),r=e(85893),B=function(n){var f=(0,_.useState)(!1),d=D()(f,2),M=d[0],P=d[1],T=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.Z,{checked:M,onChange:P,size:"small"})," Markdown\u7F16\u8F91\u5668"]})};return(0,r.jsxs)(r.Fragment,{children:[M&&(0,r.jsx)(x.Z,S()({label:n.label,name:n.name,extra:T()},n)),!M&&(0,r.jsx)(o.Z,S()({initialValue:n.value,name:n.name,label:n.label,fieldProps:{rows:8},extra:T()},n))]})},g=B,K=e(25874),I=e(88560),W=e(64317),a=e(50942),p=function(n){var f=n.render,d=(0,a.useRequest)(function(){return(0,I.xi)()}),M=d.data,P=d.loading,T=d.error;return(0,r.jsx)(r.Fragment,{children:f(M!=null?M:[],P,T)})},v=function(n){var f=n.name,d=n.label;return(0,r.jsx)(p,{render:function(P,T){return(0,r.jsx)(W.Z,{width:"md",name:f,label:d,fieldProps:{loading:T},options:s()(P.map(function(C){return{label:C.name,value:C.id}}))})}})},t=e(51625);function q(l){return l.trim()}var J=function(n){var f=new FormData;for(var d in n)n.hasOwnProperty(d)&&f.append(d,n[d]);return f},z=e(90930),V=e(97269),j=e(5966),Q=e(50335),ee=e(1677),X=e(45360),Z=e(4393);function m(){var l,n,f=(0,_.useRef)(),d=(0,_.useState)(),M=D()(d,2),P=M[0],T=M[1],C=(0,a.useSearchParams)(),$=D()(C,1),L=$[0],Y=L.get("update"),O=function(){console.log(Y),(0,I.TZ)(Y).then(function(H){console.log(H);var i=H.data,h=f.current;if(i&&h){var G;h.setFieldValue("title",i.title),h.setFieldValue("content",i.content),h.setFieldValue("categoryId",(G=i.category)===null||G===void 0?void 0:G.id),h.setFieldValue("description",i.description),h.setFieldValue("createDate",i.createDate),h.setFieldValue("updateDate",i.updateDate),h.setFieldValue("label",i.label),h.setFieldValue("thumbnailImage",i.thumbnailImage),h.setFieldValue("links",i.links),h.setFieldValue("type",i.type),h.setFieldValue("authority",i.authority),h.setFieldValue("clickCount",i.clickCount),h.setFieldValue("browserUrl",i.browserUrl),T(i)}})};(0,_.useEffect)(function(){Y&&O()},[Y]);var le=function(){var N=E()(u()().mark(function H(i){var h,G,te,re,ne,se,ae;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(h=X.ZP.loading("\u8BF7\u7A0D\u7B49"),G=i.pictures,te=J(i),G&&G!==void 0)for(re=0,ne=G;re<ne.length;re++)se=ne[re],te.append("pictures",se.originFileObj);return w.next=6,(0,I.h0)(te);case 6:return ae=w.sent,h(),X.ZP.info(ae.message),w.abrupt("return",ae.success);case 10:case"end":return w.stop()}},H)}));return function(i){return N.apply(this,arguments)}}();return(0,r.jsx)(z._z,{title:"\u6DFB\u52A0\u52A8\u6001",children:(0,r.jsx)(Z.Z,{children:(0,r.jsxs)(V.A,{onFinish:le,initialValues:{clickCount:0},formRef:f,children:[(0,r.jsx)(j.Z,{name:"id",label:"\u4E3B\u952E",hidden:!0}),(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(v,{name:"categoryId",label:"\u5206\u7C7B"}),(0,r.jsx)(j.Z,{name:"title",label:"\u6807\u9898",width:"lg"})]}),(0,r.jsx)(j.Z,{name:"description",label:"\u63CF\u8FF0"}),(0,r.jsx)(g,{name:"content",label:"\u6B63\u6587\u5185\u5BB9",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6B63\u6587\u5185\u5BB9"}]}),(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(Q.Z,{name:"createDate",label:"\u53D1\u5E03\u65F6\u95F4"}),(0,r.jsx)(Q.Z,{name:"updateDate",label:"\u4FEE\u6539\u65F6\u95F4"})]}),(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(j.Z,{name:"label",label:"\u6807\u7B7E"}),(0,r.jsx)(K.Z,{onFileSelect:function(H){var i;(i=f.current)===null||i===void 0||i.setFieldValue("thumbnailImage",H.url)},children:(0,r.jsx)(j.Z,{name:"thumbnailImage",label:"\u7F29\u7565\u56FE",rules:[{type:"url",message:"\u8BF7\u8F93\u5165URL"}]})}),(0,r.jsx)(j.Z,{name:"links",label:"\u94FE\u63A5",rules:[{type:"url",message:"\u8BF7\u8F93\u5165URL"}]}),(0,r.jsx)(t.Z,{name:"type",label:"\u7C7B\u578B"})]}),(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(j.Z,{name:"authority",label:"\u6743\u9650",rules:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}]}),(0,r.jsx)(j.Z,{name:"clickCount",label:"\u70B9\u51FB\u91CF",rules:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}]}),(0,r.jsx)(j.Z,{name:"mianji",label:"\u9762\u57FA\u4E13\u7528"}),(0,r.jsx)(j.Z,{name:"browserUrl",label:"url",rules:[{type:"url",message:"\u8BF7\u8F93\u5165URL"}]})]}),(0,r.jsx)(ee.Z,{name:"pictures",label:"\u56FE\u7247",max:9,fieldProps:{name:"pictures",listType:"picture-card",multiple:!0,defaultFileList:s()((l=P==null||(n=P.images)===null||n===void 0?void 0:n.map(function(N){return{uid:"".concat(N.id),url:N.url,name:N.fileName}}))!==null&&l!==void 0?l:[])}})]})})})}},9096:function(k,F,e){e.d(F,{QU:function(){return S},Zq:function(){return D},oC:function(){return E}});var U=e(15009),s=e.n(U),b=e(99289),u=e.n(b),c=e(50942);function E(o){return y.apply(this,arguments)}function y(){return y=u()(s()().mark(function o(A){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/file/list",{params:A}));case 1:case"end":return r.stop()}},o)})),y.apply(this,arguments)}function D(o){return R.apply(this,arguments)}function R(){return R=u()(s()().mark(function o(A){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/storage/delete",{method:"DELETE",params:{id:A}}));case 1:case"end":return r.stop()}},o)})),R.apply(this,arguments)}function S(o){return x.apply(this,arguments)}function x(){return x=u()(s()().mark(function o(A){var _,r;return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return _=new FormData,_.append("file",A),g.next=4,(0,c.request)("/api/auth/simple-upload",{method:"POST",data:_});case 4:return r=g.sent,g.abrupt("return",r.data);case 6:case"end":return g.stop()}},o)})),x.apply(this,arguments)}},88560:function(k,F,e){e.d(F,{Ip:function(){return y},Lq:function(){return g},Mg:function(){return x},TQ:function(){return A},TZ:function(){return I},h0:function(){return r},xi:function(){return R}});var U=e(15009),s=e.n(U),b=e(99289),u=e.n(b),c=e(10981),E=e(50942);function y(a){return D.apply(this,arguments)}function D(){return D=u()(s()().mark(function a(p){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/res/list",{method:"GET",params:p}));case 1:case"end":return t.stop()}},a)})),D.apply(this,arguments)}function R(){return S.apply(this,arguments)}function S(){return S=u()(s()().mark(function a(){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,E.request)("/api/res/all",{method:"GET"}));case 1:case"end":return v.stop()}},a)})),S.apply(this,arguments)}function x(a){return o.apply(this,arguments)}function o(){return o=u()(s()().mark(function a(p){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/auth/res-cate-save",{method:"POST",data:p}));case 1:case"end":return t.stop()}},a)})),o.apply(this,arguments)}function A(a){return _.apply(this,arguments)}function _(){return _=u()(s()().mark(function a(p){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/resource/list",{method:"GET",params:p}));case 1:case"end":return t.stop()}},a)})),_.apply(this,arguments)}function r(a){return B.apply(this,arguments)}function B(){return B=u()(s()().mark(function a(p){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/resource/add-post",{method:"POST",headers:(0,c.V)(),data:p}));case 1:case"end":return t.stop()}},a)})),B.apply(this,arguments)}function g(a){return K.apply(this,arguments)}function K(){return K=u()(s()().mark(function a(p){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/resource/delete",{method:"DELETE",params:{id:p}}));case 1:case"end":return t.stop()}},a)})),K.apply(this,arguments)}function I(a){return W.apply(this,arguments)}function W(){return W=u()(s()().mark(function a(p){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/resource/find-by-id",{params:{id:p}}));case 1:case"end":return t.stop()}},a)})),W.apply(this,arguments)}},10981:function(k,F,e){e.d(F,{P:function(){return s},V:function(){return b}});var U=e(92273);function s(){var u,c=(u=(0,U.rS)())!==null&&u!==void 0?u:"";return c!==""?{Authorization:c}:{}}function b(){return{"Content-Type":"multipart/form-data"}}}}]);
