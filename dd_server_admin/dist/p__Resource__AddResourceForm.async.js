"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8246],{38370:function(ae,p,a){a.r(p),a.d(p,{default:function(){return Y}});var M=a(15558),b=a.n(M),U=a(90228),C=a.n(U),T=a(87999),I=a.n(T),D=a(48305),y=a.n(D),G=a(26068),R=a.n(G),E=a(44500),L=a(1268),$=a(52014),x=a(93236),e=a(62086),z=function(n){var i=(0,x.useState)(!1),u=y()(i,2),r=u[0],o=u[1],d=function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.Z,{checked:r,onChange:o,size:"small"})," Markdown\u7F16\u8F91\u5668"]})};return(0,e.jsxs)(e.Fragment,{children:[r&&(0,e.jsx)(E.Z,R()({label:n.label,name:n.name,extra:d()},n)),!r&&(0,e.jsx)(L.Z,R()({initialValue:n.value,name:n.name,label:n.label,fieldProps:{rows:8},extra:d()},n))]})},B=z,N=a(26533),Z=a(91943),O=a(83301),V=a(74271),H=function(n){var i=n.render,u=(0,V.useRequest)(function(){return(0,Z.xi)()}),r=u.data,o=u.loading,d=u.error;return(0,e.jsx)(e.Fragment,{children:i(r!=null?r:[],o,d)})},J=function(n){var i=n.name,u=n.label;return(0,e.jsx)(H,{render:function(o,d){return(0,e.jsx)(O.Z,{width:"md",name:i,label:u,fieldProps:{loading:d},options:b()(o.map(function(j){return{label:j.name,value:j.id}}))})}})},K=a(84213),Q=a(17783),h=a(23401),s=a(41594),P=a(48901),W=a(34796),A=a(7432),X=a(7034);function Y(){var f,n,i=(0,x.useRef)(),u=(0,x.useState)(),r=y()(u,2),o=r[0],d=r[1],j=(0,V.useSearchParams)(),k=y()(j,1),w=k[0],F=w.get("update"),q=function(){console.log(F),(0,Z.TZ)(F).then(function(v){console.log(v);var t=v.data,l=i.current;if(t&&l){var m;l.setFieldValue("title",t.title),l.setFieldValue("content",t.content),l.setFieldValue("categoryId",(m=t.category)===null||m===void 0?void 0:m.id),l.setFieldValue("description",t.description),l.setFieldValue("createDate",t.createDate),l.setFieldValue("updateDate",t.updateDate),l.setFieldValue("label",t.label),l.setFieldValue("thumbnailImage",t.thumbnailImage),l.setFieldValue("links",t.links),l.setFieldValue("type",t.type),l.setFieldValue("authority",t.authority),l.setFieldValue("clickCount",t.clickCount),l.setFieldValue("browserUrl",t.browserUrl),d(t)}})};(0,x.useEffect)(function(){F&&q()},[F]);var _=function(){var c=I()(C()().mark(function v(t){var l,m,S;return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return l=A.ZP.loading("\u8BF7\u7A0D\u7B49"),m=t.pictures,m&&m&&(t.pictures=m.map(function(ee){return ee.originFileObj})),g.next=5,(0,Z.h0)(t);case 5:return S=g.sent,l(),A.ZP.info(S.message),g.abrupt("return",S.success);case 9:case"end":return g.stop()}},v)}));return function(t){return c.apply(this,arguments)}}();return(0,e.jsx)(Q._z,{title:"\u6DFB\u52A0\u52A8\u6001",children:(0,e.jsx)(X.Z,{children:(0,e.jsxs)(h.A,{onFinish:_,initialValues:{clickCount:0},formRef:i,children:[(0,e.jsx)(s.Z,{name:"id",label:"\u4E3B\u952E",hidden:!0}),(0,e.jsxs)(h.A.Group,{children:[(0,e.jsx)(J,{name:"categoryId",label:"\u5206\u7C7B"}),(0,e.jsx)(s.Z,{name:"title",label:"\u6807\u9898",width:"lg"})]}),(0,e.jsx)(s.Z,{name:"description",label:"\u63CF\u8FF0"}),(0,e.jsx)(B,{name:"content",label:"\u6B63\u6587\u5185\u5BB9",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6B63\u6587\u5185\u5BB9"}]}),(0,e.jsxs)(h.A.Group,{children:[(0,e.jsx)(P.Z,{name:"createDate",label:"\u53D1\u5E03\u65F6\u95F4"}),(0,e.jsx)(P.Z,{name:"updateDate",label:"\u4FEE\u6539\u65F6\u95F4"})]}),(0,e.jsxs)(h.A.Group,{children:[(0,e.jsx)(s.Z,{name:"label",label:"\u6807\u7B7E"}),(0,e.jsx)(N.Z,{onFileSelect:function(v){var t;(t=i.current)===null||t===void 0||t.setFieldValue("thumbnailImage",v.url)},children:(0,e.jsx)(s.Z,{name:"thumbnailImage",label:"\u7F29\u7565\u56FE",rules:[{type:"url",message:"\u8BF7\u8F93\u5165URL"}]})}),(0,e.jsx)(s.Z,{name:"links",label:"\u94FE\u63A5",rules:[{type:"url",message:"\u8BF7\u8F93\u5165URL"}]}),(0,e.jsx)(K.Z,{name:"type",label:"\u7C7B\u578B"})]}),(0,e.jsxs)(h.A.Group,{children:[(0,e.jsx)(s.Z,{name:"authority",label:"\u6743\u9650",rules:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}]}),(0,e.jsx)(s.Z,{name:"clickCount",label:"\u70B9\u51FB\u91CF",rules:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}]}),(0,e.jsx)(s.Z,{name:"mianji",label:"\u9762\u57FA\u4E13\u7528"}),(0,e.jsx)(s.Z,{name:"browserUrl",label:"url",rules:[{type:"url",message:"\u8BF7\u8F93\u5165URL"}]})]}),(0,e.jsx)(W.Z,{name:"pictures",label:"\u56FE\u7247",max:9,fieldProps:{name:"pictures",listType:"picture-card",multiple:!0,defaultFileList:b()((f=o==null||(n=o.images)===null||n===void 0?void 0:n.map(function(c){return{uid:"".concat(c.id),url:c.url,name:c.fileName}}))!==null&&f!==void 0?f:[])}})]})})})}}}]);
