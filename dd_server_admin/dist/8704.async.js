"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8704],{26533:function(Z,A,e){e.d(A,{Z:function(){return z}});var D=e(76591),t=e(80898),h=e(93236),u=e(26068),d=e.n(u),W=e(90228),_=e.n(W),p=e(87999),E=e.n(p),P=e(48305),T=e.n(P),i=e(67825),g=e.n(i),v=e(92628),n=e(62086),U=function(o){return _jsx(Modal,_objectSpread({},o))};function c(j,o){var m=document.createElement("div");m.id="select-file";var f=(0,v.createRoot)(m),G=!0,B=h.cloneElement(j,d()(d()({open:G,getContainer:!1,onCancel:function(){var $=h.cloneElement(B,{open:!1});f.render($),console.log("\u5173\u95ED"),setTimeout(function(){f.unmount(),m.remove()},300)}},o),{},{onFileSelect:function($){o==null||o.onFileSelect($);var x=h.cloneElement(B,{open:!1});f.render(x),setTimeout(function(){f.unmount(),m.remove()},300)}}));f.render(B),document.body.appendChild(m)}var S=e(38887),I=e(81888),b=e(74721),y=e(91186),L=e(35317),a=e(5874),s=e(49591),l=e(20617),r=e(9117),C=["onFileSelect"],w=function(o){var m=o.file,f=o.onClick;return(0,n.jsx)(L.J,{onClick:f,isZoomed:!0,alt:m.fileName,src:m.url,className:"object-contain w-full aspect-square bg-secondary-50"})},K=function(o){var m=o.onFileSelect,f=g()(o,C),G=(0,h.useState)([]),B=T()(G,2),J=B[0],$=B[1],x=function(){var R=E()(_()().mark(function F(){var O;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,S.oC)({current:1,pageSize:20,remove:1});case 2:O=M.sent,$(O.data.list);case 4:case"end":return M.stop()}},F)}));return function(){return R.apply(this,arguments)}}();return(0,r.Z)(E()(_()().mark(function R(){return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,x();case 2:case"end":return O.stop()}},R)}))),(0,n.jsxs)(a.Z,d()(d()({title:"\u9009\u62E9\u6587\u4EF6"},f),{},{children:[(0,n.jsx)("div",{style:{marginBottom:12},children:(0,n.jsx)(s.Z,{name:"file",action:b.t+"/api/storage/upload",headers:(0,y.P)(),onChange:function(){var R=E()(_()().mark(function F(O){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(O.file.status!=="done"){M.next=3;break}return M.next=3,x();case 3:case"end":return M.stop()}},F)}));return function(F){return R.apply(this,arguments)}}(),children:(0,n.jsx)(l.ZP,{type:"primary",icon:(0,n.jsx)(I.Z,{}),children:"\u65B0."})})}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2",children:J.map(function(R){return(0,n.jsx)(w,{file:R,onClick:function(){return m(R)}},R.id)})})]}))};function V(j){c((0,n.jsx)(K,d()({},j)),j)}var N=function(o){var m,f;return(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("div",{style:{flex:1,marginRight:2},children:o.children}),(0,n.jsx)(t.Z,{title:"\u4ECE\u6587\u4EF6\u4E2D\u9009\u62E9\u56FE\u50CF",children:(0,n.jsx)(D.Z,{style:{position:"absolute",top:(m=o.top)!==null&&m!==void 0?m:6,right:(f=o.right)!==null&&f!==void 0?f:12},onClick:function(){V(o)}})})]})},z=N},84213:function(Z,A,e){var D=e(90228),t=e.n(D),h=e(26068),u=e.n(h),d=e(15558),W=e.n(d),_=e(48305),p=e.n(_),E=e(87999),P=e.n(E),T=e(83301),i=e(74271),g=e(45575),v=e(93236),n=e(62086);function U(){return c.apply(this,arguments)}function c(){return c=P()(t()().mark(function I(){return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,i.request)("/api/rc/types"));case 1:case"end":return y.stop()}},I)})),c.apply(this,arguments)}var S=function(b){var y,L=(0,v.useState)(""),a=p()(L,2),s=a[0],l=a[1],r=(0,i.useRequest)(function(){return U()}),C=r.data,w=r.loading;return(0,n.jsx)(T.Z,u()(u()({},b),{},{options:[].concat(W()((y=C==null?void 0:C.map(function(K){return{label:K.type,value:K.type}}))!==null&&y!==void 0?y:[]),[s!==""&&{label:s,value:s}]),fieldProps:{loading:w,dropdownRender:function(V){return(0,n.jsxs)(n.Fragment,{children:[V,(0,n.jsx)(g.Z,{onChange:function(z){return l(z.target.value)}})]})}}}))};A.Z=S},38887:function(Z,A,e){e.d(A,{QU:function(){return P},Zq:function(){return p},oC:function(){return W}});var D=e(90228),t=e.n(D),h=e(87999),u=e.n(h),d=e(74271);function W(i){return _.apply(this,arguments)}function _(){return _=u()(t()().mark(function i(g){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/api/file/list",{params:g}));case 1:case"end":return n.stop()}},i)})),_.apply(this,arguments)}function p(i){return E.apply(this,arguments)}function E(){return E=u()(t()().mark(function i(g){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/api/storage/delete",{method:"DELETE",params:{id:g}}));case 1:case"end":return n.stop()}},i)})),E.apply(this,arguments)}function P(i){return T.apply(this,arguments)}function T(){return T=u()(t()().mark(function i(g){var v,n;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return v=new FormData,v.append("file",g),c.next=4,(0,d.request)("/api/auth/simple-upload",{method:"POST",data:v});case 4:return n=c.sent,c.abrupt("return",n.data);case 6:case"end":return c.stop()}},i)})),T.apply(this,arguments)}},91943:function(Z,A,e){e.d(A,{Ip:function(){return E},xi:function(){return T},Mg:function(){return g},Lq:function(){return I},h0:function(){return c},TQ:function(){return n},TZ:function(){return y}});var D=e(90228),t=e.n(D),h=e(87999),u=e.n(h),d=e(91186);function W(a){return a.trim()}var _=function(s){var l=new FormData;for(var r in s)s.hasOwnProperty(r)&&l.append(r,s[r]);return l},p=e(74271);function E(a){return P.apply(this,arguments)}function P(){return P=u()(t()().mark(function a(s){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/res/list",{method:"GET",params:s}));case 1:case"end":return r.stop()}},a)})),P.apply(this,arguments)}function T(){return i.apply(this,arguments)}function i(){return i=u()(t()().mark(function a(){return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,p.request)("/api/res/all",{method:"GET"}));case 1:case"end":return l.stop()}},a)})),i.apply(this,arguments)}function g(a){return v.apply(this,arguments)}function v(){return v=u()(t()().mark(function a(s){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/auth/res-cate-save",{method:"POST",data:s}));case 1:case"end":return r.stop()}},a)})),v.apply(this,arguments)}function n(a){return U.apply(this,arguments)}function U(){return U=u()(t()().mark(function a(s){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/resource/list",{method:"GET",params:s}));case 1:case"end":return r.stop()}},a)})),U.apply(this,arguments)}function c(a){return S.apply(this,arguments)}function S(){return S=u()(t()().mark(function a(s){var l;return t()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return l=_(s),C.abrupt("return",(0,p.request)("/api/resource/add-post",{method:"POST",headers:(0,d.V)(),data:l}));case 2:case"end":return C.stop()}},a)})),S.apply(this,arguments)}function I(a){return b.apply(this,arguments)}function b(){return b=u()(t()().mark(function a(s){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/resource/delete",{method:"DELETE",params:{id:s}}));case 1:case"end":return r.stop()}},a)})),b.apply(this,arguments)}function y(a){return L.apply(this,arguments)}function L(){return L=u()(t()().mark(function a(s){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/app/resource/find-by-id",{params:{id:s}}));case 1:case"end":return r.stop()}},a)})),L.apply(this,arguments)}},91186:function(Z,A,e){e.d(A,{P:function(){return t},V:function(){return h}});var D=e(95024);function t(){var u,d=(u=(0,D.rS)())!==null&&u!==void 0?u:"";return d!==""?{Authorization:d}:{}}function h(){return{"Content-Type":"multipart/form-data"}}}}]);
