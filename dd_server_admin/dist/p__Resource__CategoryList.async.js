"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9201],{25874:function(b,P,e){e.d(P,{Z:function(){return V}});var O=e(25465),n=e(83062),h=e(67294),l=e(42122),o=e.n(l),m=e(17061),v=e.n(m),T=e(17156),y=e.n(T),A=e(27424),R=e.n(A),i=e(70215),E=e.n(i),s=e(20745),t=e(85893),S=function(p){return _jsx(Modal,_objectSpread({},p))};function _(Z,p){var M=document.createElement("div");M.id="select-file";var C=(0,s.createRoot)(M),z=!0,G=h.cloneElement(Z,o()(o()({open:z,getContainer:!1,onCancel:function(){var N=h.cloneElement(G,{open:!1});C.render(N),console.log("\u5173\u95ED"),setTimeout(function(){C.unmount(),M.remove()},300)}},p),{},{onFileSelect:function(N){p==null||p.onFileSelect(N);var J=h.cloneElement(G,{open:!1});C.render(J),setTimeout(function(){C.unmount(),M.remove()},300)}}));C.render(G),document.body.appendChild(M)}var L=e(9096),K=e(88484),I=e(55375),a=e(10981),c=e(44033),u=e(85576),r=e(85303),D=e(28036),f=e(89048),g=["onFileSelect"],j=function(p){var M=p.file,C=p.onClick;return(0,t.jsx)(c.J,{onClick:C,isZoomed:!0,alt:M.fileName,src:M.url,className:"object-contain w-full aspect-square bg-secondary-50"})},d=function(p){var M=p.onFileSelect,C=E()(p,g),z=(0,h.useState)([]),G=R()(z,2),H=G[0],N=G[1],J=function(){var F=y()(v()().mark(function $(){var x;return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,L.oC)({current:1,pageSize:20,remove:1});case 2:x=U.sent,N(x.data.list);case 4:case"end":return U.stop()}},$)}));return function(){return F.apply(this,arguments)}}();return(0,f.Z)(y()(v()().mark(function F(){return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,J();case 2:case"end":return x.stop()}},F)}))),(0,t.jsxs)(u.Z,o()(o()({title:"\u9009\u62E9\u6587\u4EF6"},C),{},{children:[(0,t.jsx)("div",{style:{marginBottom:12},children:(0,t.jsx)(r.Z,{name:"file",action:I.ty+"/api/storage/upload",headers:(0,a.P)(),onChange:function(){var F=y()(v()().mark(function $(x){return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(x.file.status!=="done"){U.next=3;break}return U.next=3,J();case 3:case"end":return U.stop()}},$)}));return function($){return F.apply(this,arguments)}}(),children:(0,t.jsx)(D.ZP,{type:"primary",icon:(0,t.jsx)(K.Z,{}),children:"\u65B0."})})}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:H.map(function(F){return(0,t.jsx)(j,{file:F,onClick:function(){return M(F)}},F.id)})})]}))};function W(Z){_((0,t.jsx)(d,o()({},Z)),Z)}var B=function(p){var M,C;return(0,t.jsxs)("div",{style:{position:"relative"},children:[(0,t.jsx)("div",{style:{flex:1,marginRight:2},children:p.children}),(0,t.jsx)(n.Z,{title:"\u4ECE\u6587\u4EF6\u4E2D\u9009\u62E9\u56FE\u50CF",children:(0,t.jsx)(O.Z,{style:{position:"absolute",top:(M=p.top)!==null&&M!==void 0?M:6,right:(C=p.right)!==null&&C!==void 0?C:12},onClick:function(){W(p)}})})]})},V=B},51625:function(b,P,e){var O=e(17061),n=e.n(O),h=e(42122),l=e.n(h),o=e(861),m=e.n(o),v=e(27424),T=e.n(v),y=e(17156),A=e.n(y),R=e(64317),i=e(40742),E=e(65233),s=e(67294),t=e(85893);function S(){return _.apply(this,arguments)}function _(){return _=A()(n()().mark(function K(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/rc/types"));case 1:case"end":return a.stop()}},K)})),_.apply(this,arguments)}var L=function(I){var a,c=(0,s.useState)(""),u=T()(c,2),r=u[0],D=u[1],f=(0,i.useRequest)(function(){return S()}),g=f.data,j=f.loading;return(0,t.jsx)(R.Z,l()(l()({},I),{},{options:[].concat(m()((a=g==null?void 0:g.map(function(d){return{label:d.type,value:d.type}}))!==null&&a!==void 0?a:[]),[r!==""&&{label:r,value:r}]),fieldProps:{loading:j,dropdownRender:function(W){return(0,t.jsxs)(t.Fragment,{children:[W,(0,t.jsx)(E.Z,{onChange:function(V){return D(V.target.value)}})]})}}}))};P.Z=L},11421:function(b,P,e){e.r(P),e.d(P,{default:function(){return c}});var O=e(17061),n=e.n(O),h=e(42122),l=e.n(h),o=e(17156),m=e.n(o),v=e(25874),T=e(51625),y=e(88560),A=e(37476),R=e(5966),i=e(28036),E=e(67294),s=e(85893);function t(){var u=(0,E.useRef)();return(0,s.jsxs)(A.Y,{width:300,formRef:u,title:"\u65B0\u589E\u4E00\u4E2A\u5206\u7C7B",modalProps:{destroyOnClose:!0},trigger:(0,s.jsx)(i.ZP,{type:"primary",children:"\u65B0\u589E"}),onFinish:function(){var r=m()(n()().mark(function D(f){var g;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,y.Mg)(f);case 2:return g=d.sent,d.abrupt("return",g.success);case 4:case"end":return d.stop()}},D)}));return function(D){return r.apply(this,arguments)}}(),children:[(0,s.jsx)(R.Z,{name:"name",label:"\u540D\u79F0"}),(0,s.jsx)(v.Z,{onFileSelect:function(D){var f;return(f=u.current)===null||f===void 0?void 0:f.setFieldValue("logo",D.url)},children:(0,s.jsx)(R.Z,{name:"logo",label:"\u56FE\u6807"})}),(0,s.jsx)(T.Z,{name:"type",label:"\u7C7B\u578B"})]})}var S=e(90930),_=e(61185),L=e(40742),K=e(4393),I=e(78957),a=e(86738);function c(){var u=(0,E.useRef)();function r(f){return D.apply(this,arguments)}function D(){return D=m()(n()().mark(function f(g){var j;return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,L.request)("/api/res/delete",{method:"DELETE",params:{id:g.id}});case 2:(j=u.current)===null||j===void 0||j.reload();case 3:case"end":return W.stop()}},f)})),D.apply(this,arguments)}return(0,s.jsx)(S._z,{title:"\u5206\u7C7B\u5217\u8868",extra:[(0,s.jsx)(t,{},"create")],children:(0,s.jsx)(K.Z,{children:(0,s.jsx)(_.Z,{actionRef:u,columns:[{key:"id",dataIndex:"id",title:"id"},{key:"name",dataIndex:"name",title:"name"},{key:"logo",dataIndex:"logo",title:"logo"},{key:"description",dataIndex:"description",title:"description"},{key:"type",dataIndex:"type",title:"type"},{key:"navJsonString",dataIndex:"navJsonString",title:"navJsonString"},{key:"parentNode",dataIndex:"parentNode",title:"parentNode"},{key:"level",dataIndex:"level",title:"level"},{key:"actions",render:function(g,j){return(0,s.jsx)(I.Z,{children:(0,s.jsx)(a.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:function(){return r(j)},children:(0,s.jsx)(i.ZP,{size:"small",type:"dashed",children:"\u5220\u9664"})})})}}],request:function(){var f=m()(n()().mark(function g(j){var d;return n()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,y.Ip)(l()(l()({},j),{},{remove:1}));case 2:return d=B.sent,B.abrupt("return",{success:d.success,data:d.data.list,total:d.data.page.total});case 4:case"end":return B.stop()}},g)}));return function(g){return f.apply(this,arguments)}}(),search:!1})})})}},9096:function(b,P,e){e.d(P,{QU:function(){return A},Zq:function(){return T},oC:function(){return m}});var O=e(17061),n=e.n(O),h=e(17156),l=e.n(h),o=e(40742);function m(i){return v.apply(this,arguments)}function v(){return v=l()(n()().mark(function i(E){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/file/list",{params:E}));case 1:case"end":return t.stop()}},i)})),v.apply(this,arguments)}function T(i){return y.apply(this,arguments)}function y(){return y=l()(n()().mark(function i(E){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/storage/delete",{method:"DELETE",params:{id:E}}));case 1:case"end":return t.stop()}},i)})),y.apply(this,arguments)}function A(i){return R.apply(this,arguments)}function R(){return R=l()(n()().mark(function i(E){var s,t;return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return s=new FormData,s.append("file",E),_.next=4,(0,o.request)("/api/auth/simple-upload",{method:"POST",data:s});case 4:return t=_.sent,_.abrupt("return",t.data);case 6:case"end":return _.stop()}},i)})),R.apply(this,arguments)}},88560:function(b,P,e){e.d(P,{Ip:function(){return v},Lq:function(){return _},Mg:function(){return R},TQ:function(){return E},TZ:function(){return K},h0:function(){return t},xi:function(){return y}});var O=e(17061),n=e.n(O),h=e(17156),l=e.n(h),o=e(10981),m=e(40742);function v(a){return T.apply(this,arguments)}function T(){return T=l()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/res/list",{method:"GET",params:c}));case 1:case"end":return r.stop()}},a)})),T.apply(this,arguments)}function y(){return A.apply(this,arguments)}function A(){return A=l()(n()().mark(function a(){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,m.request)("/api/res/all",{method:"GET"}));case 1:case"end":return u.stop()}},a)})),A.apply(this,arguments)}function R(a){return i.apply(this,arguments)}function i(){return i=l()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/auth/res-cate-save",{method:"POST",data:c}));case 1:case"end":return r.stop()}},a)})),i.apply(this,arguments)}function E(a){return s.apply(this,arguments)}function s(){return s=l()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/resource/list",{method:"GET",params:c}));case 1:case"end":return r.stop()}},a)})),s.apply(this,arguments)}function t(a){return S.apply(this,arguments)}function S(){return S=l()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/resource/add-post",{method:"POST",headers:(0,o.V)(),data:c}));case 1:case"end":return r.stop()}},a)})),S.apply(this,arguments)}function _(a){return L.apply(this,arguments)}function L(){return L=l()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/resource/delete",{method:"DELETE",params:{id:c}}));case 1:case"end":return r.stop()}},a)})),L.apply(this,arguments)}function K(a){return I.apply(this,arguments)}function I(){return I=l()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/resource/find-by-id",{params:{id:c}}));case 1:case"end":return r.stop()}},a)})),I.apply(this,arguments)}},10981:function(b,P,e){e.d(P,{P:function(){return n},V:function(){return h}});var O=e(92273);function n(){var l,o=(l=(0,O.rS)())!==null&&l!==void 0?l:"";return o!==""?{Authorization:o}:{}}function h(){return{"Content-Type":"multipart/form-data"}}}}]);
